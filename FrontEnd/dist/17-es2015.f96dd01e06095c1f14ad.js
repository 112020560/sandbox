(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{bbVr:function(n,e,t){"use strict";t.r(e),t.d(e,"EnvironmentModule",function(){return j});var i=t("SVse"),o=t("s7LF"),c=t("iInd"),s=t("hmn9"),a=t("2IVB"),b=t("8Y7J"),r=t("YHJu"),l=t("hhfa"),d=t("c/fn"),p=t("S0UM"),u=t("ZRSf"),h=t("gtx6"),g=t("51Ls");function f(n,e){1&n&&(b.Ub(0,"p"),b.Hc(1,"Cargando..."),b.Tb())}const v=function(){return{height:"6px"}};function m(n,e){1&n&&b.Pb(0,"p-progressBar",17),2&n&&b.Cc(b.nc(2,v))}function T(n,e){if(1&n){const n=b.Vb();b.Ub(0,"div",25),b.Pb(1,"i",26),b.Ub(2,"input",27),b.bc("input",function(e){return b.yc(n),b.ec(),b.wc(2).filterGlobal(e.target.value,"contains")}),b.Tb(),b.Tb()}}function U(n,e){if(1&n&&(b.Ub(0,"th"),b.Hc(1),b.Tb()),2&n){const n=e.$implicit;b.Cb(1),b.Jc(" ",n.header," ")}}function C(n,e){if(1&n&&(b.Ub(0,"tr"),b.Fc(1,U,2,1,"th",28),b.Tb()),2&n){const n=e.$implicit;b.Cb(1),b.lc("ngForOf",n)}}function I(n,e){1&n&&(b.Ub(0,"td"),b.Ub(1,"span",32),b.Hc(2,"Activo"),b.Tb(),b.Tb())}function E(n,e){1&n&&(b.Ub(0,"td"),b.Ub(1,"span",33),b.Hc(2,"Inactivo"),b.Tb(),b.Tb())}function w(n,e){if(1&n){const n=b.Vb();b.Ub(0,"tr",29),b.Ub(1,"td"),b.Hc(2),b.Tb(),b.Ub(3,"td"),b.Hc(4),b.Tb(),b.Ub(5,"td"),b.Hc(6),b.Tb(),b.Ub(7,"td",30),b.Ub(8,"button",31),b.bc("click",function(){b.yc(n);const t=e.$implicit;return b.ec(2).showInstanceConfig(t.Instances)}),b.Tb(),b.Tb(),b.Ub(9,"td",30),b.Ub(10,"button",31),b.bc("click",function(){b.yc(n);const t=e.$implicit;return b.ec(2).showEndpointsConfig(t.EndPoints)}),b.Tb(),b.Tb(),b.Fc(11,I,3,0,"td",7),b.Fc(12,E,3,0,"td",7),b.Tb()}if(2&n){const n=e.$implicit;b.lc("pSelectableRow",n),b.Cb(2),b.Ic(n.EnvironmetId),b.Cb(2),b.Ic(n.Name),b.Cb(2),b.Ic(n.Description),b.Cb(5),b.lc("ngIf",n.IsEnable),b.Cb(1),b.lc("ngIf",!n.IsEnable)}}function y(n,e){if(1&n){const n=b.Vb();b.Ub(0,"div",34),b.Ub(1,"button",35),b.bc("click",function(){return b.yc(n),b.ec(2).showDialogToAdd()}),b.Tb(),b.Tb()}}function M(n,e){if(1&n){const n=b.Vb();b.Ub(0,"div",18),b.Ub(1,"p-table",19,20),b.bc("selectionChange",function(e){return b.yc(n),b.ec().selectedApplication=e})("onRowSelect",function(e){return b.yc(n),b.ec().onRowSelect(e)}),b.Fc(3,T,3,0,"ng-template",21),b.Fc(4,C,2,1,"ng-template",22),b.Fc(5,w,13,6,"ng-template",23),b.Fc(6,y,2,0,"ng-template",24),b.Tb(),b.Tb()}if(2&n){const n=b.ec();b.Cb(1),b.lc("columns",n.cols)("value",n.environments)("paginator",!0)("rows",10)("resizableColumns",!0)("selection",n.selectedApplication)}}function D(n,e){if(1&n){const n=b.Vb();b.Ub(0,"div",36),b.Ub(1,"div",37),b.Ub(2,"label",38),b.Hc(3,"Id"),b.Tb(),b.Tb(),b.Ub(4,"div",39),b.Ub(5,"input",40),b.bc("ngModelChange",function(e){return b.yc(n),b.ec().environment.EnvironmetId=e}),b.Tb(),b.Tb(),b.Ub(6,"div",37),b.Ub(7,"label",41),b.Hc(8,"Nombre"),b.Tb(),b.Tb(),b.Ub(9,"div",39),b.Ub(10,"input",42),b.bc("ngModelChange",function(e){return b.yc(n),b.ec().environment.Name=e}),b.Tb(),b.Tb(),b.Ub(11,"div",37),b.Ub(12,"label",43),b.Hc(13,"Descripcion"),b.Tb(),b.Tb(),b.Ub(14,"div",39),b.Ub(15,"input",44),b.bc("ngModelChange",function(e){return b.yc(n),b.ec().environment.Description=e}),b.Tb(),b.Tb(),b.Ub(16,"div",37),b.Ub(17,"label",45),b.Hc(18,"Instancias"),b.Tb(),b.Tb(),b.Ub(19,"div",39),b.Ub(20,"button",31),b.bc("click",function(){b.yc(n);const e=b.ec();return e.showInstanceConfig(e.environment.Instances)}),b.Tb(),b.Tb(),b.Ub(21,"div",37),b.Ub(22,"label",45),b.Hc(23,"Endpoints"),b.Tb(),b.Tb(),b.Ub(24,"div",39),b.Ub(25,"button",31),b.bc("click",function(){b.yc(n);const e=b.ec();return e.showEndpointsConfig(e.environment.EndPoints)}),b.Tb(),b.Tb(),b.Ub(26,"div",37),b.Ub(27,"label",46),b.Hc(28,"Activo"),b.Tb(),b.Tb(),b.Ub(29,"div",39),b.Ub(30,"p-inputSwitch",47),b.bc("ngModelChange",function(e){return b.yc(n),b.ec().environment.IsEnable=e}),b.Tb(),b.Tb(),b.Tb()}if(2&n){const n=b.ec();b.Cb(5),b.lc("ngModel",n.environment.EnvironmetId),b.Cb(5),b.lc("ngModel",n.environment.Name),b.Cb(5),b.lc("ngModel",n.environment.Description),b.Cb(15),b.lc("ngModel",n.environment.IsEnable)}}const O=function(){return{width:"50vw"}},S=function(){return{width:"700px"}},x=[{path:"",component:(()=>{class n{constructor(n){this.configService=n,this.displayDialog=!1,this.newEnvironment=!1,this.environments=[],this.displayConfig=!1,this.isJsonModified=!1,this.openInstance=!1,this.openEndpoints=!1,this.cols=[{field:"EnvironmetId",header:"Ambiente"},{field:"Name",header:"Nombre"},{field:"Description",header:"Descripcion"},{field:"Instances",header:"Instancias"},{field:"EndPoints",header:"EndPoints"},{field:"IsEnable",header:"Estado"}],this.editorOptions=new s.b,this.editorOptions.mode="code",this.editorOptions.modes=["code","text","tree","view"],this.editorOptions.onChange=()=>this.fetchdata()}fetchdata(){try{this.isJsonModified=!0,console.log("se edito"),this.openInstance&&(this.retriveDataInstance=this.editor.get()),this.openEndpoints&&(this.retriveDataEndpoints=this.editor.get())}catch(n){console.log(n),this.isJsonModified=!1}}ngOnInit(){this.onLoadEnvironments()}onLoadEnvironments(){this.configService.getAllEnvironments().subscribe(n=>{this.environments=n,console.log(this.environments)},n=>{console.error(n)})}showDialogToAdd(){this.newEnvironment=!0,this.environment={},this.displayDialog=!0}onRowSelect(n){console.log("Entre"),this.newEnvironment=!1,this.environment=this.cloneProcedure(n.data),this.displayDialog=!0}cloneProcedure(n){return Object.assign({},n)}onUpdate(){if(console.log("aplicacion a guardar  Antes"),console.log("Antes",this.environment),this.newEnvironment){const n=Object.assign({},this.environment);n.Instances=this.retriveDataInstance,n.EndPoints=this.retriveDataEndpoints,console.log("aplicacion a guardar despues"),console.log(n),this.configService.createEnvironments(n).subscribe(n=>{console.log(n),this.onLoadEnvironments()},n=>{console.error(n)})}else this.openInstance&&(this.environment.Instances=this.retriveDataInstance),this.openEndpoints&&(this.environment.EndPoints=this.retriveDataEndpoints),this.configService.updateEnvironments(this.environment.id,this.environment).subscribe(n=>{console.log(n),this.onLoadEnvironments()},n=>{console.error(n)});this.environment=null,this.displayDialog=!1}showInstanceConfig(n){this.openEndpoints=!1,this.openInstance=!0,this.data=n,this.displayConfig=!0}showEndpointsConfig(n){this.openInstance=!1,this.openEndpoints=!0,this.data=n,this.displayConfig=!0}onDelete(){}}return n.\u0275fac=function(e){return new(e||n)(b.Ob(a.a))},n.\u0275cmp=b.Ib({type:n,selectors:[["app-environment"]],viewQuery:function(n,e){if(1&n&&b.Lc(s.a,1),2&n){let n;b.vc(n=b.cc())&&(e.editor=n.first)}},decls:21,vars:21,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col"],[4,"ngIf"],["mode","indeterminate",3,"style",4,"ngIf"],["class","table-responsive",4,"ngIf"],["header","Editar Config","showEffect","fade",3,"visible","focusOnShow","responsive","modal","baseZIndex","visibleChange"],[1,"ace_editor.ace-jsoneditor",3,"options","data"],["header","Mantenimiento del Tenant","showEffect","fade",3,"visible","focusOnShow","responsive","modal","visibleChange"],["class","p-grid ui-fluid",4,"ngIf"],[1,"ui-dialog-buttonpane","ui-helper-clearfix"],["type","button","pButton","","icon","pi pi-times","label","Delete",1,"ui-button-danger",3,"click"],["type","button","pButton","","icon","pi pi-check","label","Save",3,"click"],["mode","indeterminate"],[1,"table-responsive"],["selectionMode","single",3,"columns","value","paginator","rows","resizableColumns","selection","selectionChange","onRowSelect"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[2,"text-align","right"],[1,"fa","fa-search",2,"margin","4px 4px 0 0"],["type","text","pInputText","","size","50","placeholder","Global Filter",2,"width","auto",3,"input"],[4,"ngFor","ngForOf"],[3,"pSelectableRow"],[1,"ui-resizable-column","column-center"],["pButton","","type","button","icon","pi pi-cog",1,"ui-button-secondary",3,"click"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[2,"text-align","left"],["type","button","pButton","","icon","pi pi-plus","label","Agregar",3,"click"],[1,"p-grid","ui-fluid"],[1,"p-col-4"],["for","envid"],[1,"p-col-8"],["pInputText","","id","envid","autofocus","",3,"ngModel","ngModelChange"],["for","name"],["pInputText","","id","name","autofocus","",3,"ngModel","ngModelChange"],["for","Description"],["pInputText","","id","Description",3,"ngModel","ngModelChange"],["for","CreateAt"],["for","IsEnable"],["id","IsEnable",3,"ngModel","ngModelChange"]],template:function(n,e){1&n&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Ub(4,"div",4),b.Ub(5,"strong"),b.Hc(6,"Mantenimiento Ambientes"),b.Tb(),b.Tb(),b.Ub(7,"div",5),b.Ub(8,"div",1),b.Ub(9,"div",6),b.Fc(10,f,2,0,"p",7),b.Fc(11,m,1,3,"p-progressBar",8),b.Fc(12,M,7,6,"div",9),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"p-dialog",10),b.bc("visibleChange",function(n){return e.displayConfig=n}),b.Pb(14,"json-editor",11),b.Tb(),b.Ub(15,"p-dialog",12),b.bc("visibleChange",function(n){return e.displayDialog=n}),b.Fc(16,D,31,4,"div",13),b.Ub(17,"p-footer"),b.Ub(18,"div",14),b.Ub(19,"button",15),b.bc("click",function(){return e.onDelete()}),b.Tb(),b.Ub(20,"button",16),b.bc("click",function(){return e.onUpdate()}),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&n&&(b.Cb(10),b.lc("ngIf",0===e.environments.length),b.Cb(1),b.lc("ngIf",0==e.environments.length),b.Cb(1),b.lc("ngIf",e.environments.length>0),b.Cb(1),b.Cc(b.nc(19,O)),b.lc("visible",e.displayConfig)("focusOnShow",!1)("responsive",!0)("modal",!0)("baseZIndex",1e4),b.Cb(1),b.lc("options",e.editorOptions)("data",e.data),b.Cb(1),b.Cc(b.nc(20,S)),b.lc("visible",e.displayDialog)("focusOnShow",!1)("responsive",!0)("modal",!0),b.Cb(1),b.lc("ngIf",e.environment))},directives:[i.l,r.a,s.a,l.a,d.a,p.a,u.c,l.c,h.a,i.k,u.b,o.b,o.j,o.m,g.a],styles:[".editor[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0}[_nghost-%COMP%]     json-editor, [_nghost-%COMP%]     json-editor .jsoneditor, [_nghost-%COMP%]     json-editor>div, [_nghost-%COMP%]     json-editor jsoneditor-outer{height:600px}.ui-dialog[_ngcontent-%COMP%]{width:auto!important}"]}),n})(),data:{title:"Environments"}}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({imports:[[c.g.forChild(x)],c.g]}),n})();var F=t("y1st"),k=t("SXvI"),H=t("MEzG");let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=b.Mb({type:n}),n.\u0275inj=b.Lb({imports:[[i.c,o.h,P,u.d,p.b,g.b,r.b,h.b,d.b,F.b,H.b,k.a,s.c]]}),n})()}}]);